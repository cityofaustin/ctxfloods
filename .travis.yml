language: node_js
node_js:
- 8
before_script: yarn;
script: yarn test;
before_deploy: yarn build;
deploy:
  provider: s3
  access_key_id: "$AWS_ACCESS_KEY_ID"
  secret_access_key: "$AWS_SECRET_ACCESS_KEY"
  bucket: "$S3_BUCKET"
  skip_cleanup: true
  local_dir: build
  acl: public_read
  on:
    all_branches: true
    condition: "$AWS_ACCESS_KEY_ID"
env:
  global:
  - secure: Ahfm7Xnb7hjXpsElnF431SvAYOgNt5PDRCah5CJ6ZnGmuE7WHxrDNyllYKZRJHKgbEIJrYecGVlhJvU49gwrf7etfPCziFsjd3g7lJKjVH2E6mozWm+DECD2uuLBwX/nJdKdFp9Hl/NX3U4P+u5FbM8hBQ3y+3CCkJdtZrFqr3cMopTtO9PrCG6hPbVEtKZ3KdzTykeHjylFtFVH88BaNmyg+XGvshF/vxIp2FBvK3W3eLrQf9xPCq5EbHMJZyhaKm3cvUNz4fU+499k150X/mGnrY+LMeLR32uiTcJy1awN4mTTp4XpUIgr9KUvCWZCN8iwTtezCEju8Nra5oVISp2gtJZd3VvUI5Ijpfx6Ib2yBH87vZM4WzcwZrCtnSb1mveHU6JKSRDh3Y/GxA1eUnWfN4pMWuP+APy3f66sWGuVW6KCnZQXysUlzezYuKIieL0XoW1xO6/wORSPlqQtOfz1eJ4kSMW1z4KxjwLp/X24swI7TfNopS0a8pi4xmXKzASo6VIMV67bjItSO8KZeJ80ycC1FEI7hbLbNDGAudXYXm2yr+GTWprlh5YSIP6a50dWwkS5comB9DxnGXG9ptDbIVYVVIisq+RJCO5EnB8m/dmZ2gU7zzaWydljTBuf2C6yXEC7SkY589FZNv0cyhVyJ+aIa5gJh4CbcElfw6s=
  - secure: A58PtHoQMUf9maGiRsXXwwvD1JqQPE6jo6U0BFWVPf8XHhK2SklMoH/mpdZUzZGswwk3ygR9TnWXQbJlbe0B2h1/pYnjvv8ohBeJ3eQ+Q6jLQeOXnQzP25jcHniN/44FpnyEipywoBaQmsEfk46OEKRjWmjQPMkS+/raOFsgNQtz52Nz9GW1YXOL72QzMjZPD4xPdxU0WJxWIBNikbqIRAQ30XcM+SbXh3ytp7cXaNMmf3pyzC0WCqp/mczRG9KtT+A+SRApjJ8DXtRoGw4XKo0YxGS5wyBlZ3N+ZA+u6yNBfJdQWeeVwpfr/jgaDPb9ZzZaR/Q4sAvhXskHqB2xTk1wo/oxObW+cmUxKo3b8hnV5ZZFVfGq+pvJdsIHVkZCFTWKRMJmAS5Di3s1Wg1618IyjeXQ5FKj/geFuGzhcR2Eu+aBkygRygD6Lm3YcWiwbcrxnJP69E9XTovRajJKCW9oeMV3r1KrcHUAOazVzsTxDvAGuS+FfWFPlyomz6yYTWO5+b6JqTHIDWyLqeDA59ZCc7wJAUCwlq4LQe+3yp+e7pV4nThXExX8F7FaokE1Llmlf081Og7/VbE6lLrezuoiFeCXOm8jg286aUcujAcXdeZ3LDNNfK/4QYmi531g+vdO0ZJExlooIqb5s0dHDEHJKsirHAxR8cWOZPN9qD4=
  - CURRENT_FLOODS_BRANCH_NAME=bs-cameras
  - S3_BUCKET=ctxfloods-frontend-bs-cameras
  - REACT_APP_BACKEND_URL=https://lewnquj5o2.execute-api.us-east-1.amazonaws.com/dev